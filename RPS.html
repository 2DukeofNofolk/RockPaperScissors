<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />

        <script>
            function userPlay(){
                let choices = ["Rock", "Paper", "Scissors"];
                let choice = window.prompt("Enter: Rock, Paper or Scissors:");
                while (choices.indexOf(choice) == -1){
                        alert("Please, try again");
                        choice = window.prompt("Enter: Rock, Paper or Scissors:");
                }
                if (choice == choices[0]){
                    return 0;
                }else if (choice == choices[1]){
                    return 1;
                }else{
                    return 2;
                }

            }

            function computerPlay(){
                return Math.floor(Math.random() * 3);
            }

            function playRound(playerSelection, computerSelection){
                let playerChoice = playerSelection;
                let computerChoice = computerSelection;
                if (playerChoice == computerChoice){
                    return 0;
                }else if (playerChoice == 1){
                    if (computerChoice == 0){
                        return 1;
                    }else{
                        return 2;
                    }
                }else if (playerChoice == 0){
                    if (computerChoice == 1){
                        return 2;
                    }else{
                        return 1;
                    }
                }else if (playerChoice == 2){
                    if (computerChoice == 0){
                        return 2;
                    }else{
                        return 1;
                    }
                }

            }

            function game(){
                choices = ["Rock", "Paper", "Scissors"];
                let computerWins = 0;
                let playerWins = 0;
                let roundWinner = 0;
                for (let i = 0; i < 5; i++){
                    let playerSelection = userPlay();
                    let computerSelection = computerPlay();
                    roundWinner = playRound(playerSelection, computerSelection);
                    if (roundWinner == 0){
                        alert("The player chose " + choices[playerSelection] + ". The computer chose " + choices[computerSelection] + ". This round was a draw")
                    }else if(roundWinner == 1){
                        alert("The player chose " + choices[playerSelection] + ". The computer chose " + choices[computerSelection] + ". The player wins this round")
                        playerWins += 1;
                        if (playerWins >= 3){
                            return alert("The player wins!!")
                        }
                    }else {
                        alert("The player chose " + choices[playerSelection] + ". The computer chose " + choices[computerSelection] + ". The computer wins this round")
                        computerWins += 1;
                        if (computerWins >= 3){
                            return alert("The computer wins!!")
                        }
                    }
                }
                if (playerWins == computerWins){
                    alert("It was a draw!!");
                }else if (playerWins > computerWins){
                    alert("The player won the most rounds!!");
                }else{
                    alert("The computer won the most rounds!!")
                }
            } 

            game();
        </script>
    </head>
</html>